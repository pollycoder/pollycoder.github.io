<!DOCTYPE html><html lang="en" data-mode="dark" ><head><meta name="google-site-verification" content="dRB1pgoL23OMuTCJJJ1NGJ36mdq_ZcDuuhBHlIjOovo" /><meta name="baidu-site-verification" content="code-Lha2jw4Qiu" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'G-8J92YH68TT', 'auto'); ga('send', 'pageview'); </script><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Tutorial for GPOPS-II" /><meta name="author" content="Polly Chau" /><meta property="og:locale" content="en" /><meta name="description" content="The Very Beginning" /><meta property="og:description" content="The Very Beginning" /><link rel="canonical" href="https://pollycoder.github.io/posts/GPOPS-II/" /><meta property="og:url" content="https://pollycoder.github.io/posts/GPOPS-II/" /><meta property="og:site_name" content="Polly’s Mind Palace" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2024-07-04T10:30:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Tutorial for GPOPS-II" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@Polly Chau" /><meta name="google-site-verification" content="dRB1pgoL23OMuTCJJJ1NGJ36mdq_ZcDuuhBHlIjOovo" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Polly Chau","url":"https://github.com/pollycoder/"},"dateModified":"2024-07-08T18:52:58+08:00","datePublished":"2024-07-04T10:30:00+08:00","description":"The Very Beginning","headline":"Tutorial for GPOPS-II","mainEntityOfPage":{"@type":"WebPage","@id":"https://pollycoder.github.io/posts/GPOPS-II/"},"url":"https://pollycoder.github.io/posts/GPOPS-II/"}</script><title>Tutorial for GPOPS-II | Polly's Mind Palace</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Polly's Mind Palace"><meta name="application-name" content="Polly's Mind Palace"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://raw.githubusercontent.com/pollycoder/blog_image/main/avatar/dj5.jpeg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Polly's Mind Palace</a></div><div class="site-subtitle font-italic">Sweet are the uses of adversity.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/paradise/" class="nav-link"> <i class="fa-fw fa fa-lightbulb-o ml-xl-3 mr-xl-3 unloaded"></i> <span>POLLY'S PARADISE</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/pollycoder" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['pollyjoe2003','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Tutorial for GPOPS-II</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Tutorial for GPOPS-II</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1720060200" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jul 4, 2024 </em> </span> <span> Updated <em class="" data-ts="1720435978" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jul 8, 2024 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/pollycoder/">Polly Chau</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1335 words"> <em>7 min</em> read</span> <span id="/posts/GPOPS-II/" class="leancloud_visitors" data-flag-title="Tutorial for GPOPS-II"> <i class="far fa-eye fa-fw"><span class="leancloud-visitors-count"></span></i> </span></div></div></div><div class="post-content"><h1 id="the-very-beginning">The Very Beginning</h1><p>GPOPS-II is a MATLAB software based on Gauss pseudo-spectral method, mainly used on solving optimal control problems (OCP). This blog is a summary of the documentation of GPOPS-II, including the structure of the program and frequently-used parameters, mainly based on my own projects completed with GPOPS-II. Thanks for <a href="https://kavinwkp.github.io/2021/12/11/Math-MATLAB-GPOPS/">kunpeng’s blog</a> and the user’s guide from <a href="https://www.gpops2.com/">GPOPS-II official website</a> !</p><p>There’s something you should know in advance:</p><ol><li>GPOPS-II divide the whole time interval into multiple time points. The state and control corresponding to each time point are a row vector, forming the matrix for calculation arranging in rows.<li>Here’s the symbol list:</ol><div class="table-wrapper"><table><thead><tr><th>Symbol<th>Meaning<tbody><tr><td>$p$<td>Order of phase<tr><td>$N^{(p)}$<td>Length of time sequence for each phase<tr><td>$M$<td>Number of guessing points<tr><td>$g$<td>Number of eventgroups<tr><td>$n_b$<td>Dimension of each eventgroup<tr><td>$n_y$<td>Dimension of state vector for each phase<tr><td>$n_u$<td>Dimension of control vector for each phase<tr><td>$n_s$<td>Number of static parameters for each phase<tr><td>$n_c$<td>Number of path constraints for each phase<tr><td>$n_d$<td>Dimension of integrands for each phase</table></div><ol><li>For numerical examples, please go to user’s guide for help.</ol><h1 id="program-structure-of-gpops-ii">Program Structure of GPOPS-II</h1><p>A complete GPOPS-II solving program is shown below:</p><div class="language-matlab highlighter-rouge"><div class="code-header"> <span data-label-text="Matlab"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
</pre><td class="rouge-code"><pre><span class="c1">%-------------------------------------------------------------%</span>
<span class="c1">% ------------------- Variables defination -------------------%</span>
<span class="c1">%-------------------------------------------------------------%</span>
<span class="c1">% Bounds strucure assignment</span>
<span class="c1">% Insert your code ...</span>

<span class="c1">% Guess structure assignment</span>
<span class="c1">% Insert your code ...</span>

<span class="c1">% Auxdata structure assignment</span>
<span class="c1">% Insert your code ...</span>


<span class="c1">%-------------------------------------------------------------%</span>
<span class="c1">% -------------------------- Setup ---------------------------%</span>
<span class="c1">%-------------------------------------------------------------%</span>
<span class="c1">% Name</span>
<span class="nb">setup</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">"OCP-Name"</span><span class="p">;</span>

<span class="c1">% Functions</span>
<span class="nb">setup</span><span class="o">.</span><span class="nb">functions</span><span class="o">.</span><span class="n">continuous</span> <span class="o">=</span> <span class="o">@</span><span class="n">OCPContinuous</span><span class="p">;</span>
<span class="nb">setup</span><span class="o">.</span><span class="nb">functions</span><span class="o">.</span><span class="n">endpoint</span> <span class="o">=</span> <span class="o">@</span><span class="n">OCPEndpoint</span><span class="p">;</span>

<span class="c1">% Bounds, Guess, auxdata</span>
<span class="nb">setup</span><span class="o">.</span><span class="nb">bounds</span> <span class="o">=</span> <span class="nb">bounds</span><span class="p">;</span>
<span class="nb">setup</span><span class="o">.</span><span class="n">guess</span> <span class="o">=</span> <span class="n">guess</span><span class="p">;</span>
<span class="nb">setup</span><span class="o">.</span><span class="n">auxdata</span> <span class="o">=</span> <span class="n">auxdata</span><span class="p">;</span>

<span class="c1">% Other setup parameters</span>
<span class="c1">% Insert your code ...</span>


<span class="c1">%-------------------------------------------------------------%</span>
<span class="c1">% -------------------------- Solve ---------------------------%</span>
<span class="c1">%-------------------------------------------------------------%</span>
<span class="n">output</span> <span class="o">=</span> <span class="n">gpops2</span><span class="p">(</span><span class="nb">setup</span><span class="p">);</span>


<span class="c1">%-------------------------------------------------------------%</span>
<span class="c1">% -------------------- Continuous Function -------------------%</span>
<span class="c1">%-------------------------------------------------------------%</span>
<span class="k">function</span> <span class="n">output</span> <span class="o">=</span> <span class="n">OCPContinuous</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span>
<span class="c1">% Defination</span>
<span class="c1">% ...</span>
<span class="k">end</span>


<span class="c1">%-------------------------------------------------------------%</span>
<span class="c1">% --------------------- Endpoint Function --------------------%</span>
<span class="c1">%-------------------------------------------------------------%</span>
<span class="k">function</span> <span class="n">output</span> <span class="o">=</span> <span class="n">OCPEndpoint</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span>
<span class="c1">% Defination</span>
<span class="c1">% ...</span>
<span class="k">end</span>
</pre></table></code></div></div><h2 id="continuous-function-dynamics-equations"><span class="mr-2">Continuous function: Dynamics equations</span><a href="#continuous-function-dynamics-equations" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><div class="language-matlab highlighter-rouge"><div class="code-header"> <span data-label-text="Matlab"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">function</span> <span class="n">output</span> <span class="o">=</span> <span class="n">OCPContinuous</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span>
</pre></table></code></div></div><h3 id="components-of-input"><span class="mr-2">Components of input:</span><a href="#components-of-input" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><code class="language-plaintext highlighter-rouge">input.phase(p).time</code>: time vector for $p^{th}$ phase, $size=N^{(p)}\times 1$<li><code class="language-plaintext highlighter-rouge">input.phase(p).state</code>: state matrix for $p^{th}$ phase, $size=N^{(p)}\times n_y^{(p)}$<li><code class="language-plaintext highlighter-rouge">input.phase(p).control</code>: control matrix for $p^{th}$ phase, $size=N^{(p)}\times n_u^{(p)}$<li><code class="language-plaintext highlighter-rouge">input.parameter</code>: static parameter for $p^{th}$ phase, $size=N^{(p)}\times n_s$<li><code class="language-plaintext highlighter-rouge">input.auxdata</code></ul><h3 id="components-of-output"><span class="mr-2">Components of output:</span><a href="#components-of-output" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><code class="language-plaintext highlighter-rouge">output(p).dynamics</code>: dynamic equations for $p^{th}$ phase, $size=N^{(p)}\times n_y^{(p)}$<li><code class="language-plaintext highlighter-rouge">output(p).path</code>: path constraint for $p^{th}$ phase, $size=N^{(p)}\times n_c^{(p)}$<li><code class="language-plaintext highlighter-rouge">output(p).integrand</code>: integrand for $p^{th}$ phase, $size=N^{(p)}\times n_d^{(p)}$</ul><h2 id="endpoint-function"><span class="mr-2">Endpoint function:</span><a href="#endpoint-function" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><div class="language-matlab highlighter-rouge"><div class="code-header"> <span data-label-text="Matlab"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">function</span> <span class="n">output</span> <span class="o">=</span> <span class="n">OCPEndpoint</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span>
</pre></table></code></div></div><h3 id="components-of-input-1"><span class="mr-2">Components of input:</span><a href="#components-of-input-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><code class="language-plaintext highlighter-rouge">input.phase(p).initialtime</code>: initial time for $p^{th}$ phase<li><code class="language-plaintext highlighter-rouge">input.phase(p).finaltime</code>: final time for $p^{th}$ phase<li><code class="language-plaintext highlighter-rouge">input.phase(p).initialstate</code>: initial state for $p^{th}$ phase, $size=1\times n_y^{(p)}$<li><code class="language-plaintext highlighter-rouge">input.phase(p).finalstate</code>: final state for $p^{th}$ phase, $size=1\times n_y^{(p)}$<li><code class="language-plaintext highlighter-rouge">input.phase(p).integral</code>: integral for $p^{th}$ phase, $size=1\times n_d^{(p)}$<li><code class="language-plaintext highlighter-rouge">input.parameter</code>: static parameter for $p^{th}$ phase, $size=1\times n_s$<li><code class="language-plaintext highlighter-rouge">input.auxdata</code></ul><h3 id="components-of-output-1"><span class="mr-2">Components of output:</span><a href="#components-of-output-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><p><code class="language-plaintext highlighter-rouge">output.objective</code>: Objective function</p><li><p><code class="language-plaintext highlighter-rouge">output.eventgroup(g)</code>: event constraints, $size=1\times n_b^{(g)}$</p></ul><h2 id="setup"><span class="mr-2">Setup</span><a href="#setup" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><code class="language-plaintext highlighter-rouge">setup</code> is a structure composed of multiple structures. Therefore, for necessary components, we strongly recommend that you define the substructures in advance and use them to assign values to the components of <code class="language-plaintext highlighter-rouge">setup</code>.</p><h3 id="necessary"><span class="mr-2">Necessary:</span><a href="#necessary" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-matlab highlighter-rouge"><div class="code-header"> <span data-label-text="Matlab"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="c1">% Name</span>
<span class="nb">setup</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">"OCP-Name"</span><span class="p">;</span>

<span class="c1">% Functions</span>
<span class="nb">setup</span><span class="o">.</span><span class="nb">functions</span><span class="o">.</span><span class="n">continuous</span> <span class="o">=</span> <span class="o">@</span><span class="n">OCPContinuous</span><span class="p">;</span>
<span class="nb">setup</span><span class="o">.</span><span class="nb">functions</span><span class="o">.</span><span class="n">endpoint</span> <span class="o">=</span> <span class="o">@</span><span class="n">OCPEndpoint</span><span class="p">;</span>

<span class="c1">% Bounds, Guess, auxdata</span>
<span class="nb">setup</span><span class="o">.</span><span class="nb">bounds</span> <span class="o">=</span> <span class="nb">bounds</span><span class="p">;</span>
<span class="nb">setup</span><span class="o">.</span><span class="n">guess</span> <span class="o">=</span> <span class="n">guess</span><span class="p">;</span>
<span class="nb">setup</span><span class="o">.</span><span class="n">auxdata</span> <span class="o">=</span> <span class="n">auxdata</span><span class="p">;</span>
</pre></table></code></div></div><h4 id="bounds"><span class="mr-2">Bounds:</span><a href="#bounds" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Each variable declared should have its lower bound and upper bound defined, or GPOPS-II could not recognize the boundary for sprinkling.</p><p>Be sure that the boundary not be too strict, or GPOPS-II cannot give a correct solution (SNOPT INFO -31) or you may encounter numerical difficulties (SNOPT INFO -41).</p><ul><li>Time Bounds:</ul><div class="language-matlab highlighter-rouge"><div class="code-header"> <span data-label-text="Matlab"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="nb">bounds</span><span class="o">.</span><span class="n">phase</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">.</span><span class="n">initialtime</span><span class="o">.</span><span class="nb">lower</span> <span class="o">=</span> <span class="n">t0_lower</span><span class="p">;</span>
<span class="nb">bounds</span><span class="o">.</span><span class="n">phase</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">.</span><span class="n">initialtime</span><span class="o">.</span><span class="nb">upper</span> <span class="o">=</span> <span class="n">t0_upper</span><span class="p">;</span>
<span class="nb">bounds</span><span class="o">.</span><span class="n">phase</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">.</span><span class="n">finaltime</span><span class="o">.</span><span class="nb">lower</span> <span class="o">=</span> <span class="n">tf_lower</span><span class="p">;</span>
<span class="nb">bounds</span><span class="o">.</span><span class="n">phase</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">.</span><span class="n">finaltime</span><span class="o">.</span><span class="nb">upper</span> <span class="o">=</span> <span class="n">tf_upper</span><span class="p">;</span>
<span class="nb">bounds</span><span class="o">.</span><span class="n">phase</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">.</span><span class="n">durations</span><span class="o">.</span><span class="nb">lower</span> <span class="o">=</span> <span class="n">dt_lower</span><span class="p">;</span>
<span class="nb">bounds</span><span class="o">.</span><span class="n">phase</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">.</span><span class="n">durations</span><span class="o">.</span><span class="nb">upper</span> <span class="o">=</span> <span class="n">dt_upper</span><span class="p">;</span>
</pre></table></code></div></div><ul><li>State Bounds: $size=1\times n_y^{(p)}$</ul><div class="language-matlab highlighter-rouge"><div class="code-header"> <span data-label-text="Matlab"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="nb">bounds</span><span class="o">.</span><span class="n">phase</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">.</span><span class="n">initialstate</span><span class="o">.</span><span class="nb">lower</span> <span class="o">=</span> <span class="n">state0_lower</span><span class="p">;</span>
<span class="nb">bounds</span><span class="o">.</span><span class="n">phase</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">.</span><span class="n">initialstate</span><span class="o">.</span><span class="nb">upper</span> <span class="o">=</span> <span class="n">state0_upper</span><span class="p">;</span>
<span class="nb">bounds</span><span class="o">.</span><span class="n">phase</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">.</span><span class="n">finalstate</span><span class="o">.</span><span class="nb">lower</span> <span class="o">=</span> <span class="n">statef_lower</span><span class="p">;</span>
<span class="nb">bounds</span><span class="o">.</span><span class="n">phase</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">.</span><span class="n">finalstate</span><span class="o">.</span><span class="nb">upper</span> <span class="o">=</span> <span class="n">statef_upper</span><span class="p">;</span>
<span class="nb">bounds</span><span class="o">.</span><span class="n">phase</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="nb">lower</span> <span class="o">=</span> <span class="n">state_lower</span><span class="p">;</span>
<span class="nb">bounds</span><span class="o">.</span><span class="n">phase</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="nb">upper</span> <span class="o">=</span> <span class="n">state_upper</span><span class="p">;</span>
</pre></table></code></div></div><ul><li>Control Bounds: $size=1\times n_u^{(p)}$</ul><div class="language-matlab highlighter-rouge"><div class="code-header"> <span data-label-text="Matlab"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nb">bounds</span><span class="o">.</span><span class="n">phase</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="nb">lower</span> <span class="o">=</span> <span class="n">u_lower</span><span class="p">;</span>
<span class="nb">bounds</span><span class="o">.</span><span class="n">phase</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="nb">upper</span> <span class="o">=</span> <span class="n">u_upper</span><span class="p">;</span>
</pre></table></code></div></div><ul><li>Path Constraint Bounds: $size=1\times n_c^{(p)}$</ul><div class="language-matlab highlighter-rouge"><div class="code-header"> <span data-label-text="Matlab"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nb">bounds</span><span class="o">.</span><span class="n">phase</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">.</span><span class="nb">path</span><span class="o">.</span><span class="nb">lower</span> <span class="o">=</span> <span class="n">path_lower</span><span class="p">;</span>
<span class="nb">bounds</span><span class="o">.</span><span class="n">phase</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">.</span><span class="nb">path</span><span class="o">.</span><span class="nb">upper</span> <span class="o">=</span> <span class="n">path_upper</span><span class="p">;</span>
</pre></table></code></div></div><ul><li>Integral Bounds: $size=1\times n_d^{(p)}$</ul><div class="language-matlab highlighter-rouge"><div class="code-header"> <span data-label-text="Matlab"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nb">bounds</span><span class="o">.</span><span class="n">phase</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">.</span><span class="nb">integral</span><span class="o">.</span><span class="nb">lower</span> <span class="o">=</span> <span class="n">int_lower</span><span class="p">;</span>
<span class="nb">bounds</span><span class="o">.</span><span class="n">phase</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">.</span><span class="nb">integral</span><span class="o">.</span><span class="nb">upper</span> <span class="o">=</span> <span class="n">int_upper</span><span class="p">;</span>
</pre></table></code></div></div><ul><li>Parameter Bounds (if defined): $size=1\times n_s $</ul><div class="language-matlab highlighter-rouge"><div class="code-header"> <span data-label-text="Matlab"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nb">bounds</span><span class="o">.</span><span class="n">parameter</span><span class="o">.</span><span class="nb">lower</span> <span class="o">=</span> <span class="n">para_lower</span><span class="p">;</span>
<span class="nb">bounds</span><span class="o">.</span><span class="n">parameter</span><span class="o">.</span><span class="nb">upper</span> <span class="o">=</span> <span class="n">para_upper</span><span class="p">;</span>
</pre></table></code></div></div><ul><li>Eventgroup Bounds (if defined): $size=1\times n_b$</ul><div class="language-matlab highlighter-rouge"><div class="code-header"> <span data-label-text="Matlab"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nb">bounds</span><span class="o">.</span><span class="n">eventgroup</span><span class="p">(</span><span class="n">g</span><span class="p">)</span><span class="o">.</span><span class="nb">lower</span> <span class="o">=</span> <span class="n">event_lower</span><span class="p">;</span>
<span class="nb">bounds</span><span class="o">.</span><span class="n">eventgroup</span><span class="p">(</span><span class="n">g</span><span class="p">)</span><span class="o">.</span><span class="nb">upper</span> <span class="o">=</span> <span class="n">event_upper</span><span class="p">;</span>
</pre></table></code></div></div><h3 id="guess"><span class="mr-2">Guess:</span><a href="#guess" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Each variable declared should have its guessing value, or GPOPS-II could not iterate based on the guess (except for <code class="language-plaintext highlighter-rouge">eventgroup</code> and <code class="language-plaintext highlighter-rouge">path</code>).</p><blockquote class="prompt-danger"><div><p>Attention: For state and control, each row of guess should correspond to the time points you provide: \(X_{guess-i}=X_{guess}(t_i)\)</p></div></blockquote><ul><li>Time Guess: $size=M^{(p)}\times1$</ul><div class="language-matlab highlighter-rouge"><div class="code-header"> <span data-label-text="Matlab"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">guess</span><span class="o">.</span><span class="n">phase</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">.</span><span class="nb">time</span> <span class="o">=</span> <span class="n">t_guess</span><span class="p">;</span>
</pre></table></code></div></div><ul><li>State Guess: $size=M^{(p)}\times n_y^{(p)}$</ul><div class="language-matlab highlighter-rouge"><div class="code-header"> <span data-label-text="Matlab"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">guess</span><span class="o">.</span><span class="n">phase</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">state_guess</span><span class="p">;</span>
</pre></table></code></div></div><ul><li>Control Guess: $size=M^{(p)}\times n_u^{(p)}$</ul><div class="language-matlab highlighter-rouge"><div class="code-header"> <span data-label-text="Matlab"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">guess</span><span class="o">.</span><span class="n">phase</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">.</span><span class="n">control</span> <span class="o">=</span> <span class="n">control_guess</span><span class="p">;</span>
</pre></table></code></div></div><ul><li>Integral Guess: $size=1\times n_d$</ul><div class="language-matlab highlighter-rouge"><div class="code-header"> <span data-label-text="Matlab"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">guess</span><span class="o">.</span><span class="nb">integral</span> <span class="o">=</span> <span class="n">integral_guess</span><span class="p">;</span>
</pre></table></code></div></div><ul><li>Parameter Guess: $size=1\times n_s$</ul><div class="language-matlab highlighter-rouge"><div class="code-header"> <span data-label-text="Matlab"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">guess</span><span class="o">.</span><span class="n">parameter</span> <span class="o">=</span> <span class="n">parameter_guess</span><span class="p">;</span>
</pre></table></code></div></div><h4 id="auxdata"><span class="mr-2">Auxdata</span><a href="#auxdata" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><code class="language-plaintext highlighter-rouge">auxdata</code> includes all the constants you are going to use during the solution, making it easier for users to import the constants in continuous function and endpoint function without repeatedly defining the same constant.</p><h3 id="optional"><span class="mr-2">Optional:</span><a href="#optional" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Here we just list some frequently-used parameters.</p><h4 id="derivatives-and-cofig"><span class="mr-2">Derivatives and Cofig:</span><a href="#derivatives-and-cofig" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="table-wrapper"><table><thead><tr><th>Field<th>Possible Values<th>Default<tbody><tr><td><code class="language-plaintext highlighter-rouge">setup.derivatives.supplier</code><td>‘sparseBD’, ‘sparseCD’, ‘sparseFD’<td>‘sparseFD’<tr><td><code class="language-plaintext highlighter-rouge">setup.derivatives.derivativelevel</code><td>‘first’, ‘second’<td>‘first’<tr><td><code class="language-plaintext highlighter-rouge">setup.derivatives.dependencies</code><td>‘full’, ‘sparse’, ‘sparseNaN’<td>‘sparseNaN’<tr><td><code class="language-plaintext highlighter-rouge">setup.method</code><td>‘RPM-Differentiation’, ‘RPM-Integration’<td>’RPM-Differentiation’</table></div><h4 id="scales"><span class="mr-2">Scales:</span><a href="#scales" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="table-wrapper"><table><thead><tr><th>Field<th>Possible Values<th>Default<tbody><tr><td><code class="language-plaintext highlighter-rouge">setup.scales.method</code><td>‘none’, ‘auto-bounds’, ‘auto-guess’<td>‘none’</table></div><h4 id="mesh"><span class="mr-2">Mesh:</span><a href="#mesh" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="table-wrapper"><table><thead><tr><th>Field<th>Possible Values<th>Default<tbody><tr><td><code class="language-plaintext highlighter-rouge">setup.mesh.method</code><td>‘hp-PattersonRao’, ‘hp-DarbyRao’, ’hp-LiuRao’, <br />’hp-LiuRao-Legendre’<td>‘hp-PattersonRao’<tr><td><code class="language-plaintext highlighter-rouge">setup.mesh.tolerance</code><td>$[0, 1]$<td>$10^{-3}$<tr><td><code class="language-plaintext highlighter-rouge">setup.mesh.maxiterations</code><td>Integer $\geq 0$<td>$10$<tr><td><code class="language-plaintext highlighter-rouge">setup.mesh.colpointsmin</code><td>Interger $\geq 2$<td>3<tr><td><code class="language-plaintext highlighter-rouge">setup.mesh.colpointsmax</code><td>Integer $\geq$ <code class="language-plaintext highlighter-rouge">colpoints</code><td>10<tr><td><code class="language-plaintext highlighter-rouge">setup.mesh.phase(p).fraction</code><td>Length $M\geq 1$ of Positive Numbers $&gt;0$ and $&lt;1$ that Sum to Unity<td>0.1*ones(1,10)<tr><td><code class="language-plaintext highlighter-rouge">setup.mesh.phase(p).colpoints</code><td>Length $M \geq 1$ of Positive Integers $&gt; 1$ and $&lt; 10$<td>4*ones(1,10)</table></div><h4 id="nlp"><span class="mr-2">NLP:</span><a href="#nlp" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="table-wrapper"><table><thead><tr><th>Field<th>Possible Values<th>Default<tbody><tr><td><code class="language-plaintext highlighter-rouge">setup.nlp.solver</code><td>‘snopt’, ‘ipopt’<td>‘ipopt’<tr><td><code class="language-plaintext highlighter-rouge">setup.nlp.ipoptoptions.linear solver</code><td>‘mumps’ or ‘ma57’<td>‘mumps’<tr><td><code class="language-plaintext highlighter-rouge">setup.nlp.ipoptoptions.tolerance</code><td>$&gt;0$<td>$10^{-7}$<tr><td><code class="language-plaintext highlighter-rouge">setup.nlp.ipoptoptions.maxiterations</code><td>Integer $&gt;0$<td>2000<tr><td><code class="language-plaintext highlighter-rouge">setup.nlp.snoptoptions.tolerance</code><td>$&gt;0$<td>$10^{-6}$<tr><td><code class="language-plaintext highlighter-rouge">setup.nlp.snoptoptions.maxiterations</code><td>Integer $&gt;0$<td>2000</table></div><h2 id="output"><span class="mr-2">Output</span><a href="#output" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>The most important component of structure <code class="language-plaintext highlighter-rouge">output</code> is <code class="language-plaintext highlighter-rouge">output.result</code>, which includes:</p><ul><li><p><code class="language-plaintext highlighter-rouge">output.result.objective</code>: value of your objective</p><li><p><code class="language-plaintext highlighter-rouge">output.result.solution</code>: optimal solution, includes:</p><ul><li><p><code class="language-plaintext highlighter-rouge">output.result.solution.phase(p).time</code>: time sequence</p><li><p><code class="language-plaintext highlighter-rouge">output.result.solution.phase(p).state</code>: state matrix, consists of row vectors</p><li><p><code class="language-plaintext highlighter-rouge">output.result.solution.phase(p).costate</code>: approximated costate values for checking your results</p><li><p><code class="language-plaintext highlighter-rouge">output.result.solution.phase(p).control</code>: optimal control, cosists of row vectors</p></ul></ul><h1 id="possible-errors">Possible Errors</h1><p>Usually, we use SNOPT instead of IPOPT if we can get one, because the performance of SNOPT is better (but IPOPT is free). Normally, you should get the message below if GPOPS-II solves your problem correctly:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="go">SNOPTA EXIT   0 -- finished successfully
SNOPTA INFO   1 -- optimality conditions satisfied
</span></pre></table></code></div></div><p>But you may receive different messages if the problem were not solved successfully. For detailed information, you may go to the <a href="https://tomopt.com/docs/snoptA.pdf">userguide of SNOPT</a>. Here we just list error messages easiest to meet during your programming.</p><h3 id="infeasible-solution"><span class="mr-2">Infeasible Solution</span><a href="#infeasible-solution" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>If you get this message, it means that the solution inexists because the conditions you provided for problem solving are impossible to satisfy:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="go">SNOPTA EXIT -- 10 The problem appears to be infeasible
SNOPTA INFO -- 11 infeasible linear constraints
SNOPTA INFO -- 12 infeasible linear equalities
</span></pre></table></code></div></div><p>You should check the conditions you provided and fix them.</p><h3 id="resource-limit-error"><span class="mr-2">Resource Limit Error</span><a href="#resource-limit-error" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>If you get this message, it means that the solution exists but it cannot converge to the correct result within iterations:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="go">SNOPTA EXIT -- 30 Resource limit error
SNOPTA INFO -- 31 iteration limit reached
SNOPTA INFO -- 32 major iteration limit reached
</span></pre></table></code></div></div><p>You should try to increase the time of iterations.</p><h3 id="numeraical-difficulties"><span class="mr-2">Numeraical Difficulties</span><a href="#numeraical-difficulties" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>If you get this message, it means that SNOPT cannot improve the result during iterations:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="go">SNOPTA EXIT -- 40 Terminated after numerical difficulties
SNOPTA INFO -- 41 current point cannot be improved
SNOPTA INFO -- 42 singular basis
SNOPTA INFO -- 43 cannot satisfy the general constraints
SNOPTA INFO -- 44 ill-conditioned null-space basis
</span></pre></table></code></div></div><p>Firstly, you should check the dynamic equations you defined, because mostly the error is caused by the wrong dynamic equations. Then you should try to reduce the numerical illness of the problem.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/technotes/'>TechNotes</a>, <a href='/categories/oric/'>ORIC</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/ocp/" class="post-tag no-text-decoration" >OCP</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Tutorial+for+GPOPS-II+-+Polly%27s+Mind+Palace&url=https%3A%2F%2Fpollycoder.github.io%2Fposts%2FGPOPS-II%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Tutorial+for+GPOPS-II+-+Polly%27s+Mind+Palace&u=https%3A%2F%2Fpollycoder.github.io%2Fposts%2FGPOPS-II%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fpollycoder.github.io%2Fposts%2FGPOPS-II%2F&text=Tutorial+for+GPOPS-II+-+Polly%27s+Mind+Palace" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/ocp/">OCP with Path Constraint</a><li><a href="/posts/GPOPS-II/">Tutorial for GPOPS-II</a><li><a href="/posts/Bugs-I-Encountered-(Week-1)/">Bugs I Encountered (Week 1)</a><li><a href="/posts/Binary-Search-Tree-Python/">Binary Search Tree (Python)</a><li><a href="/posts/debug/">Bugs I Encountered (Week 3)</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ros/">ros</a> <a class="post-tag" href="/tags/debug/">debug</a> <a class="post-tag" href="/tags/dsa/">DSA</a> <a class="post-tag" href="/tags/ocp/">OCP</a> <a class="post-tag" href="/tags/algorithm/">algorithm</a> <a class="post-tag" href="/tags/cite/">cite</a> <a class="post-tag" href="/tags/ubuntu/">Ubuntu</a> <a class="post-tag" href="/tags/uml/">uml</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/ocp/"><div class="card-body"> <em class="small" data-ts="1720405800" data-df="ll" > Jul 8, 2024 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>OCP with Path Constraint</h3><div class="text-muted small"><p> Pontryagin’s Maximum Principle Pontryagin’s Maximum Principle (PMP) is one of the most important parts in OCP solving. Based on variational method, PMP allows us to solve OCPs whose objective func...</p></div></div></a></div><div class="card"> <a href="/posts/Ubuntu-Installation/"><div class="card-body"> <em class="small" data-ts="1662878610" data-df="ll" > Sep 11, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Usage of Ubuntu on PC installed Windows Before</h3><div class="text-muted small"><p> Some bugs you are going to encounter (Thanks for Danny Wu&#39;s image on his blog:https://www.idannywu.com//1203.html?preview=true) Here we use DELL computer to install Ubuntu 20.04. For installat...</p></div></div></a></div><div class="card"> <a href="/posts/cite-your-source/"><div class="card-body"> <em class="small" data-ts="1663081170" data-df="ll" > Sep 13, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Cite your source</h3><div class="text-muted small"><p> Whenever you copy code from others,  you have to cite the source ! For details, please go to: MIT Code Writing Handbook. What should be provided URL Date of retrieval ( If you adapte...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/hash/" class="btn btn-outline-primary" prompt="Older"><p>Hash (Python)</p></a> <a href="/posts/ocp/" class="btn btn-outline-primary" prompt="Newer"><p>OCP with Path Constraint</p></a></div><script type="text/javascript"> $(function () { const origin = "https://giscus.app"; const iframe = "iframe.giscus-frame"; const lightTheme = "light"; const darkTheme = "dark_dimmed"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "pollycoder/pollycoder.github.io", "data-repo-id": "R_kgDOIA-I2w", "data-category": "Comments", "data-category-id": "DIC_kwDOIA-I284CRpLB", "data-mapping": "pathname", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-theme": "purple_dark", "data-input-position": "bottom", "data-lang": "en", "crossorigin": "anonymous", "async": "" }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementById("tail-wrapper").appendChild(giscusScript); addEventListener("message", (event) => { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); }); </script></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://twitter.com/username">Polly Zhou</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ros/">ros</a> <a class="post-tag" href="/tags/debug/">debug</a> <a class="post-tag" href="/tags/dsa/">DSA</a> <a class="post-tag" href="/tags/ocp/">OCP</a> <a class="post-tag" href="/tags/algorithm/">algorithm</a> <a class="post-tag" href="/tags/cite/">cite</a> <a class="post-tag" href="/tags/ubuntu/">Ubuntu</a> <a class="post-tag" href="/tags/uml/">uml</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> $(function() { function updateMermaid(event) { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { const mode = event.data.message; if (typeof mermaid === "undefined") { return; } let expectedTheme = (mode === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* Re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } let initTheme = "default"; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Markdown converts to HTML */ $("pre").has("code.language-mermaid").each(function() { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<div class=\"mermaid\">${svgCode}</div>`); }); mermaid.initialize(mermaidConf); window.addEventListener("message", updateMermaid); }); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-8J92YH68TT"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-8J92YH68TT'); }); </script><style> .videoWrapper { position: relative; padding-bottom: 56.333%; height: 0; background: black; } .videoWrapper iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; }</style><script> function get_youtube_id(url) { var p = /^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/; return (url.match(p)) ? RegExp.$1 : false; } function vimeo_embed(url,el) { var id = false; $.ajax({ url: 'https://vimeo.com/api/oembed.json?url='+url, async: true, success: function(response) { if(response.video_id) { id = response.video_id; if(url.indexOf('autoplay=1') !== -1) var autoplay=1; else var autoplay=0; if(url.indexOf('loop=1') !== -1) var loop=1; else var loop=0; var theInnerHTML = '<div class="videoWrapper"><iframe src="https://player.vimeo.com/video/'+id+'/?byline=0&title=0&portrait=0'; if(autoplay==1) theInnerHTML += '&autoplay=1'; if(loop==1) theInnerHTML += '&loop=1'; theInnerHTML += '" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>'; el.innerHTML = theInnerHTML; } } }); } function video_embed() { var p = document.getElementsByTagName('p'); for(var i = 0; i < p.length; i++) { //check if this is an external url (that starts with https:// or http:// if (p[i].innerHTML.indexOf("http://") == 0 || p[i].innerHTML.indexOf("https://") == 0) { var youtube_id = get_youtube_id(p[i].innerHTML); if(youtube_id) { if(p[i].innerHTML.indexOf('autoplay=1') !== -1) var autoplay=1; else var autoplay=0; if(p[i].innerHTML.indexOf('loop=1') !== -1) var loop=1; else var loop=0; var theInnerHTML = '<div class="videoWrapper"><iframe width="720" height="420" src="https://www.youtube.com/embed/' + youtube_id + '?rel=0&showinfo=0'; if(autoplay==1) theInnerHTML += '&autoplay=1'; if(loop==1) theInnerHTML += '&loop=1&playlist='+youtube_id+'&version=3'; if(p[i].innerHTML.indexOf('start=') !== -1) theInnerHTML += '&start='+p[i].innerHTML.substring(p[i].innerHTML.indexOf('start=')+6); theInnerHTML += '" frameborder="0" allowfullscreen></iframe></div>'; p[i].innerHTML = theInnerHTML; } if(p[i].innerHTML.indexOf('vimeo.com') !== -1) { //ask vimeo for the id and place the embed vimeo_embed(p[i].innerHTML,p[i]); } } } } video_embed(); function mp3_embed() { var p = document.getElementsByTagName('p'); for(var i = 0; i < p.length; i++) { if(p[i].innerHTML.indexOf('.mp3') !== -1) { var str = p[i].innerHTML.split('?'); if(str.length == 1) str[1] = ''; var str1 = str[1]; str1 = str1.replace('&','').replace('&',''); str1 = str1.replace('autoplay=1','').replace('autoplay=0',''); str1 = str1.replace('loop=1','').replace('loop=0',''); str1 = str1.replace('controls=0','').replace('controls=1',''); if (str[0].lastIndexOf('.mp3', str[0].length - 4) === str[0].length - 4 && str1.length == 0) { if(str[1].indexOf('autoplay=1') !== -1) var autoplay=1; else var autoplay=0; if(str[1].indexOf('loop=1') !== -1) var loop=1; else var loop=0; if(str[1].indexOf('controls=0') !== -1) var controls=0; else var controls=1; var newInnerHTML = '<audio'; if(autoplay==1) newInnerHTML += ' autoplay'; if(loop==1) newInnerHTML += ' loop'; if(controls==1) newInnerHTML += ' controls'; newInnerHTML += '><source src="'+str[0]+'" type="audio/mpeg">Your browser does not support the audio element.</audio>'; p[i].innerHTML = newInnerHTML; } } } } mp3_embed(); function mp4_embed() { var p = document.getElementsByTagName('p'); for (var i = 0; i < p.length; i++) { if (p[i].innerHTML.indexOf('.mp4') !== -1) { var mp4 = p[i].innerHTML.split('?'); var mp4url = mp4[0]; var mp4par = "controls" var newInnerHTML = `<video ${mp4par} style="width:100%; height:100%; object-fit: fill;"> <source src="${mp4url}" type="video/mp4"> Your browser does not support the video tag. </video>`; p[i].innerHTML = newInnerHTML; } } } mp4_embed(); </script> <script src="/assets/js/dist/av-core-mini-0.6.1.js"></script> <script>AV.initialize("jT7rDLXlG92o3ZuRpve1GRgU-gzGzoHsz", "L9TAA414ktdb77JEKrHi9DdB");</script> <script> function showTime(Counter) { var query = new AV.Query(Counter); var entries = []; var $visitors = $(".leancloud_visitors"); $visitors.each(function () { entries.push( $(this).attr("id").trim() ); }); query.containedIn('url', entries); query.find() .done(function (results) { var COUNT_CONTAINER_REF = '.leancloud-visitors-count'; if (results.length === 0) { $visitors.find(COUNT_CONTAINER_REF).text(0); return; } for (var i = 0; i < results.length; i++) { var item = results[i]; var url = item.get('url'); var time = item.get('time'); var element = document.getElementById(url); $(element).find(COUNT_CONTAINER_REF).text(time); } for(var i = 0; i < entries.length; i++) { var url = entries[i]; var element = document.getElementById(url); var countSpan = $(element).find(COUNT_CONTAINER_REF); if( countSpan.text() == '') { countSpan.text(0); } } }) .fail(function (object, error) { console.log("Error: " + error.code + " " + error.message); }); } function addCount(Counter) { var $visitors = $(".leancloud_visitors"); var url = $visitors.attr('id').trim(); var title = $visitors.attr('data-flag-title').trim(); var query = new AV.Query(Counter); query.equalTo("url", url); query.find({ success: function(results) { if (results.length > 0) { var counter = results[0]; counter.fetchWhenSave(true); counter.increment("time"); counter.save(null, { success: function(counter) { var $element = $(document.getElementById(url)); $element.find('.leancloud-visitors-count').text(counter.get('time')); }, error: function(counter, error) { console.log('Failed to save Visitor num, with error message: ' + error.message); } }); } else { var newcounter = new Counter(); /* Set ACL */ var acl = new AV.ACL(); acl.setPublicReadAccess(true); acl.setPublicWriteAccess(true); newcounter.setACL(acl); /* End Set ACL */ newcounter.set("title", title); newcounter.set("url", url); newcounter.set("time", 1); newcounter.save(null, { success: function(newcounter) { var $element = $(document.getElementById(url)); $element.find('.leancloud-visitors-count').text(newcounter.get('time')); }, error: function(newcounter, error) { console.log('Failed to create'); } }); } }, error: function(error) { console.log('Error:' + error.code + " " + error.message); } }); } $(function() { var Counter = AV.Object.extend("Counter"); if ($('.leancloud_visitors').length == 1) { addCount(Counter); } else if ($('.post-title-link').length > 1) { showTime(Counter); } }); </script>
